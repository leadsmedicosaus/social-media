{% extends "base.html" %}
{% load static %}

{% block page-title %} Edit Post {% endblock %}

{% block body %}

<div style="max-width: 600px; margin: 0 auto; padding: 2rem;">

    <h2>Edit Post</h2>
    
    <p class="pico-color-slate-400">
        Scheduled for: <strong>{{ post.scheduled_on }}</strong>
    </p>

    <article>
        <h4>Current Image:</h4>
        {% if post.media_file %}
            <div style="display: flex; justify-content: center; margin-bottom: 1rem;">
                <img src="{{ post.media_file.url }}" alt="Current media" 
                    style="max-width: 100%; max-height: 400px; object-fit: contain; border-radius: 8px;">
            </div>
        {% else %}
            <p class="pico-color-slate-500">No image uploaded</p>
        {% endif %}
    </article>

    <article>
        <h4>Upload New Image:</h4>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            
            <label for="media_file">
                <input type="file" name="media_file" id="media_file" accept="image/*,video/*" required>
            </label>
            
            <small class="pico-color-slate-400">
                Upload a new image to replace the current one. The image will NOT be processed (no text will be added).
            </small>

            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                <button type="submit">
                    <i class="bi bi-upload"></i> Upload & Save
                </button>
                <a href="/schedule/{{ isodate }}/" role="button" class="secondary">
                    Cancel
                </a>
            </div>
        </form>
    </article>

    <article>
        <h4>Post Description:</h4>
        <p style="white-space: pre-line; background: var(--pico-card-background-color); padding: 1rem; border-radius: 8px;">{{ post.description }}</p>
    </article>

</div>

{% endblock %}
